<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" href="/and/style/in/style.css" type="text/css" />
<link rel="stylesheet" href="/and/style/in/reset.css" type="text/css" />
<link rel="stylesheet" href="/and/style/in/grid.css" type="text/css" />
<link rel="stylesheet" href="/and/style/in/style.css" type="text/css" />
<link rel="start" href="/and/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/and/feed/us/recent_entries.xml" />
<script type="text/javascript" src="/and/scripts/being/jquery-1.5.min.js"></script>
<script type="text/javascript" src="/and/scripts/being/jquery.syntaxhighlighter.min.js"></script>
<script type="text/javascript" src="/and/scripts/being/scripts.js"></script>
<script type="text/javascript" src="/and/mt.js"></script>


    <title>I like tight pants and figuring out fontforge-python’s representation of postscript curves</title>
    <link rel="stylesheet" href="/and/style/in/tellyou.css" type="text/css" />
    <link rel="prev bookmark" href="/and/programmatically-manipulating-typefaces" title="I like tight pants and programmatically manipulating typefaces" />
    <link rel="next bookmark" href="/and/how-it-has-come-about-that-code-hosting-site-github-offers-visualisations-of-typeface-development" title="I like tight pants and how it has come about that code hosting site github offers visualisations of typeface development" />
    <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://i.liketightpants.net/and/figuring-out-fontforge-pythons-representation-of-postscript-curves.html"
    trackback:ping="http://mt.schr.fr/tb.cgi/50"
    dc:title="Figuring Out Fontforge-Python’s Representation of Postscript Curves"
    dc:identifier="http://i.liketightpants.net/and/figuring-out-fontforge-pythons-representation-of-postscript-curves.html"
    dc:subject=""
    dc:description="A young man poses to the right of a whiteboard on which is constructed a path of curves and lines."
    dc:creator="tellyou"
    dc:date="2012-06-03T17:06:30+01:00" />
</rdf:RDF>
-->

    <meta property="og:title" content="I like tight pants and figuring out fontforge-python’s representation of postscript curves"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://i.liketightpants.net/and/figuring-out-fontforge-pythons-representation-of-postscript-curves"/>
    
    <meta property="og:image" content="http://i.liketightpants.net/and/assets/scaled/to/830/wide/and/called/i_like_tightpants_and_figuring_out_fontforge_pythons_representation_of_postscript_curves.jpg"/>
    <meta property="og:site_name" content="I like tight pants and mathematics"/>
    <meta property="og:description"
          content="A young man poses to the right of a whiteboard on which is constructed a path of curves and lines."/>
    <meta property="fb:admins" content="1488294875"/>
</head>
<body>
<div id="header" class="container_7">
  <div class="grid_2">
  <h1><a href="/and/">i . like tight pants . net</a></h1>
  </div>
  <div class="grid_3">
  <ul>
    
    
    <li><a href="/and/i-need-my-generic-font-medicine">latest</a></li>
    
    <li><a href="/and/about">about</a></li>
    <li><a href="/and/archives">index</a></li>
  </ul>
  </div>
  <div class="grid_2">
  <p class="byline">New entries published Monday and Thursday, 22:00 CET (<a href="/and/feed/us/recent_entries.xml">RSS</a>)</p><!-- <h4>search box</h4> -->
  </div>
</div>

<div id="content" class="container_7">
<div class="sidebar grid_1">
  
  <img src="http://mt.schr.fr/lib/support/assets_c/userpics/userpic-6-100x100.png?8" width="100" height="100" alt="" />
  
  <h4 class="author">tellyou</h4>
  <p>&nbsp;</p>
  
  <hr />
  
  <h4>Other articles by tellyou</h4>
  <dl>
  
  
  
  
  
  <dt><a href="/and/release-early-release-often-version-numbers-for-typefaces">Release Early Release Often Version Numbers For Typefaces</a></dt>
  <dd>September 25, 2013  9:53 PM</dd>
  
  
  
  
  <dt><a href="/and/the-story-of-nokia-microsoft-and-a-1000-hearts-breaking">The Story of Nokia, Microsoft and a 1000 Hearts Breaking</a></dt>
  <dd>September  4, 2013 10:02 PM</dd>
  
  
  
  
  <dt><a href="/and/etherpad-or-the-textarea-is-a-lonely-place">Etherpad Or The Textarea Is A Lonely Place</a></dt>
  <dd>April 22, 2013  9:59 PM</dd>
  
  
  
  
  <dt><a href="/and/how-it-has-come-about-that-code-hosting-site-github-offers-visualisations-of-typeface-development">How it Has Come About That Code Hosting Site Github Offers Visualisations of Typeface Development</a></dt>
  <dd>August  4, 2012  8:28 PM</dd>
  
  
  
  
  
  
  
  <dt><a href="/and/my-favourite-wikipedia-user-user-rama">My Favourite Wikipedia User User:Rama</a></dt>
  <dd>February 23, 2012 11:43 PM</dd>
  
  
  
  
  <dt><a href="/and/making-unix-programs">Making unix programs</a></dt>
  <dd>February  2, 2012  1:33 PM</dd>
  
  
  
  
  <dt><a href="/and/installing-compilers">Installing compilers</a></dt>
  <dd>December  1, 2011  3:13 PM</dd>
  
  
  
  
  <dt><a href="/and/we-like-tight-pants-and-mathematics">We like tight pants and mathematics</a></dt>
  <dd>November 23, 2011 10:27 AM</dd>
  
  
  
  
  <dt><a href="/and/the-voice-of-the-shell">The voice of the shell</a></dt>
  <dd>October 26, 2011  8:20 PM</dd>
  
  
  
  
  <dt><a href="/and/learning-how-to-program">Learning how to program</a></dt>
  <dd>August 11, 2011 11:04 AM</dd>
  
  
  
  
  <dt><a href="/and/honest-artist-statements">Honest artist statements</a></dt>
  <dd>July  9, 2010  6:15 PM</dd>
  
  
  
  
  <dt><a href="/and/juxtapositions">Juxtapositions</a></dt>
  <dd>March 14, 2010  9:32 PM</dd>
  
  
  
  
  <dt><a href="/and/heroes">Heroes</a></dt>
  <dd>March  8, 2010  8:06 PM</dd>
  
  
  </dl>

  

  <hr />
  
  <h4>Other writers</h4>
  <ul>
  
    <li>glit</li>
  
    <li>jenseits</li>
  
    <li>habitus</li>
  
    <li>tellyou</li>
  
    <li>baseline</li>
  
    <li>bnf</li>
  
  </ul>
    
</div>
<div class="post grid_5">
  <p class="byline">
  <a href="/and/programmatically-manipulating-typefaces">Previous</a> 
  
  
    / <a href="/and/how-it-has-come-about-that-code-hosting-site-github-offers-visualisations-of-typeface-development">Next</a>
  </p>
  <div>
    <div class="article grid_3 alpha omega suffix_2">
    <h4>Figuring Out Fontforge-Python’s Representation of Postscript Curves</h4>
    <p><a href="/and/assets/called/i_like_tightpants_and_figuring_out_fontforge_pythons_representation_of_postscript_curves_2.jpg">
  <img src="/and/assets/scaled/to/830/wide/and/called/i_like_tightpants_and_figuring_out_fontforge_pythons_representation_of_postscript_curves_2.jpg" style="width:830;height:555;" alt="You see a young man posing to the right of a whiteboard, looking into the camera. He holds a marker in his right hand as if he is writing, his right foot is planted on the whiteboards horizontal support. He wears black leggings and a salmon pink sleeveless t-shirt. On the whiteboard is constructed a path of curves and lines, showing also the bézier control points. All the points are marked either offCurve or onCurve." title="" />
</a></p>

<p class="byline">At the OSP workshop <a href="http://osp.schr.fr/workshop/write-me-a-shadow/raw/latest/specimen/index.html" title="Write me a shadow. OSP @ ESAD Valence">Write me a shadow</a>, ESAD Valence (FR)</p>

<p>When <a href="http://www.ludi.be/" title="ludi">Ludi</a> and me prepare for a workshop on Open Source typography in Valence, we put together a batch of Python scripts for Fontforge. Among which a port of <a href="http://i.liketightpants.net/and/programmatically-manipulating-typefaces#comment-168" title="I like tight pants and programmatically manipulating typefaces">the script</a> that John and me made in Robofab for a previous workshop, that straightens curves by removing the bézier handles.</p>

<p>Internally, many typefaces are constructed with PostScript, which can be seen as a set of drawing instructions to an imaginary pen.</p>

<p>Postscript has three basic drawing instructions:<br/>
<em>moveto(x, y)</em>: move the pen to this point to start drawing a path<br/>
<em>lineto(x,y)</em>: draw a line from the previous point to the point x,y<br/>
<em>curveto(x1,y1,x2,y2,x3,y3)</em>: draw a curve from the previous point to the point x3,y3, using x1,y1 and x2,y2 as bézier handles, off curve points that control the shape of the curve.</p>

<p>It turns out that Fontforge-Python represents PostScript contours as a set of points. Fair enough. The points have a type property, which can be either onCurve or offCurve. So like in the Robofab script, we first try to remove all the offCurve points.</p>

<p>This turns out to be too radical: a lot more points are removed then seems necessary. Prince Charmant <a href="http://www.oep-h.com/" title="OEP-H">Pierre Marchand</a> to the rescue. It turns out that points that are normally created as part of a lineto, are also called offCurve by FontForge, even if they are strictly speaking neither on or off a curve.</p>

<p>So, how to keep the points called offCurve that are actually part of the contours, and throw away the others? We know that if a point is onCurve, it will always be followed y two control points (offCurve). So instead of checking for offCurves, we simply skip the next two points every time we encounter an onCurve.</p>

<p>Like this:</p>


<pre>font = fontforge.activeFont()

for glyph in font.glyphs():
   new_contours = []
   for contour in glyph.layers[1]:
       new_contour = []
       i = 0
       while i &lt; len(contour):
           p = contour[i]
           if p.on_curve:
               i += 2
           new_contour.append((p.x, p.y))
           i += 1
       new_contours.append(new_contour)
   pen = glyph.glyphPen()
   for to_draw in new_contours:
       pen.moveTo(to_draw[0])
       for i in to_draw[1:]:
           pen.lineTo(i)
       pen.closePath()</pre>

<p>This won’t work, by the way, if you are dealing with TrueType curves. But that’s a different story altogether.</p>
    <div id="comments" class="comments">







    
    
    <div class="comments-open" id="comments-open">
        <h4 class="comments-open-header">Leave a comment</h4>
        <div class="comments-open-content">

        
            <div id="comment-greeting"></div>

            <form method="post" action="http://mt.schr.fr/comments.cgi" name="comments_form" id="comments-form" onsubmit="return mtCommentOnSubmit(this)">
                <input type="hidden" name="static" value="1" />
                <input type="hidden" name="entry_id" value="51" />
                <input type="hidden" name="__lang" value="en" />
                <input type="hidden" name="parent_id" value="" id="comment-parent-id" />
                <input type="hidden" name="armor" value="1" />
                <input type="hidden" name="preview" value="" />
                <input type="hidden" name="sid" value="" />
                <div id="comments-open-data">
                    <div id="comment-form-name">
                      <div class="alpha grid_1"><label for="comment-author" class="span-4">Name</label></div>
                        <div class="omega grid_2"><input id="comment-author" name="author" size="30" value="" onfocus="mtCommentFormOnFocus()" /></div>
                    </div>
                    <div id="comment-form-email">
                        <div class="alpha grid_1"><label for="comment-email" class="span-4">Email Address</label></div>
                        <div class="omega grid_2"><input id="comment-email" name="email" size="30" value="" onfocus="mtCommentFormOnFocus()" /></div>
                    </div>
                    <div id="comment-form-url">
                        <div class="alpha grid_1"><label for="comment-url" class="span-4">URL</label></div>
                        <div class="omega grid_2"><input id="comment-url" name="url" size="30" value="" onfocus="mtCommentFormOnFocus()" /></div>
                    </div>
                    <div id="comment-form-remember-me">
                        <input type="checkbox" id="comment-bake-cookie" name="bakecookie" onclick="mtRememberMeOnClick(this)" value="1" accesskey="r" />
                        <label for="comment-bake-cookie">Remember personal info?</label>
                    </div>
                </div>
                <div id="comment-form-reply" style="display:none">
                    <input type="checkbox" id="comment-reply" name="comment_reply" value="" onclick="mtSetCommentParentID()" />
                    <label for="comment-reply" id="comment-reply-label"></label>
                </div>
                <div id="comments-open-text">
                    <label for="comment-text">Comments
                    (You may use HTML tags for style)</label><br />
                    <textarea id="comment-text" name="text" rows="15" style="width:100%;" onfocus="mtCommentFormOnFocus()"></textarea>
                </div>
                <div id="comments-open-captcha"></div>
                <div id="comments-open-footer">
                   <!-- <input type="submit" accesskey="v" name="preview_button" id="comment-preview" value="Preview" onclick="this.form.preview.value='1';" /> -->
                    <input type="submit" accesskey="s" name="post" id="comment-submit" value="Submit" />
                </div>
            </form>


        </div>
    </div>
    <script type="text/javascript">
    <!--
    mtAttachEvent("load", mtEntryOnLoad);
    mtAttachEvent("unload", mtEntryOnUnload);
    //-->
    </script>
    


</div>


    </div>
  </div>
  <hr />

</div>

<div class="sidebar grid_1">
  <h4>Latest articles</h4>
  <dl>
  
  <dt><a href="/and/i-need-my-generic-font-medicine">I Need My Generic Font Medicine</a></dt>
  <dd>October  9, 2013  9:55 PM</dd>
  
  <dt><a href="/and/48-hours-of-writing-stylesheets-with-etherpad-and-a-gong">48 Hours of Writing Stylesheets with Etherpad and a Gong</a></dt>
  <dd>October  8, 2013 10:06 PM</dd>
  
  <dt><a href="/and/release-early-release-often-version-numbers-for-typefaces">Release Early Release Often Version Numbers For Typefaces</a></dt>
  <dd>September 25, 2013  9:53 PM</dd>
  
  <dt><a href="/and/the-story-of-nokia-microsoft-and-a-1000-hearts-breaking">The Story of Nokia, Microsoft and a 1000 Hearts Breaking</a></dt>
  <dd>September  4, 2013 10:02 PM</dd>
  
  <dt><a href="/and/it-might-be-a-unix-sin-but-i-would-like-you-to-add-dot-t-x-t-as-the-extension-of-your-readme-file">It Might Be a Unix Sin But I Would Like You to Add .txt As the Extension of Your README file</a></dt>
  <dd>April 30, 2013  9:51 PM</dd>
  
  <dt><a href="/and/etherpad-or-the-textarea-is-a-lonely-place">Etherpad Or The Textarea Is A Lonely Place</a></dt>
  <dd>April 22, 2013  9:59 PM</dd>
  
  <dt><a href="/and/the-most-barebones-online-font-editor-possible">The Most Barebones Online Font Editor Possible</a></dt>
  <dd>April 18, 2013  9:59 PM</dd>
  
  <dt><a href="/and/belgian-newspapers">Belgian Newspapers</a></dt>
  <dd>March 29, 2013 10:17 PM</dd>
  
  <dt><a href="/and/parties-in-paris">Parties in Paris</a></dt>
  <dd>September  7, 2012  3:24 PM</dd>
  
  <dt><a href="/and/how-it-has-come-about-that-code-hosting-site-github-offers-visualisations-of-typeface-development">How it Has Come About That Code Hosting Site Github Offers Visualisations of Typeface Development</a></dt>
  <dd>August  4, 2012  8:28 PM</dd>
  
  </dl>

  

</div>
</div>
<div id="bar">&nbsp;</div>
<!-- Piwik, Open Source Analytics,
let’s not give Google more data then necessary! Eric --> 
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://var.schr.fr/piwik/" : "http://var.schr.fr/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 2);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://var.schr.fr/piwik/piwik.php?idsite=2" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->
</body>
</html>
