<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" href="/and/style/in/style.css" type="text/css" />
<link rel="stylesheet" href="/and/style/in/reset.css" type="text/css" />
<link rel="stylesheet" href="/and/style/in/grid.css" type="text/css" />
<link rel="stylesheet" href="/and/style/in/style.css" type="text/css" />
<link rel="start" href="/and/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/and/feed/us/recent_entries.xml" />
<script type="text/javascript" src="/and/scripts/being/jquery-1.5.min.js"></script>
<script type="text/javascript" src="/and/scripts/being/jquery.syntaxhighlighter.min.js"></script>
<script type="text/javascript" src="/and/scripts/being/scripts.js"></script>
<script type="text/javascript" src="/and/mt.js"></script>


    <link rel="stylesheet" href="/and/style/in/bnf.css" type="text/css" />
    <link rel="prev bookmark" href="/and/making-unix-programs" title="I like tight pants and making unix programs" />
    <link rel="next bookmark" href="/and/why-would-europes-largest-open-source-convention-identify-itself-with-a-large-shrivelled-brain" title="I like tight pants and why would europe’s largest open source convention identify itself with a large shrivelled brain?" />
    <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://i.liketightpants.net/and/downloading-funghi.html"
    trackback:ping="http://mt.schr.fr/tb.cgi/42"
    dc:title="Downloading funghi, from Wikimedia Commons"
    dc:identifier="http://i.liketightpants.net/and/downloading-funghi.html"
    dc:subject="Scripts"
    dc:description="# print the urls of all the images in a category of Wikimedia Commons
# example:
# $ python get_commons.py &quot;Category:Illustrations_of_fungi&quot;"
    dc:creator="bnf"
    dc:date="2012-02-03T18:36:40+01:00" />
</rdf:RDF>
-->

    <title>I like tight pants and downloading funghi, from wikimedia commons</title>
    <meta property="og:title" content="I like tight pants and downloading funghi, from wikimedia commons"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="http://i.liketightpants.net/and/downloading-funghi"/>
    
    <meta property="og:image" content="http://i.liketightpants.net/and/assets/called/108px-Kleiner_Waldchampignon-1.jpg"/>
    <meta property="og:site_name" content="I like tight pants and mathematics"/>
    <meta property="og:description"
          content="# print the urls of all the images in a category of Wikimedia Commons
# example:
# $ python get_commons.py "Category:Illustrations_of_fungi""/>
    <meta property="fb:admins" content="1488294875"/>
</head>
<body>
<div id="header" class="container_7">
  <div class="grid_2">
  <h1><a href="/and/">i . like tight pants . net</a></h1>
  </div>
  <div class="grid_3">
  <ul>
    
    
    <li><a href="/and/parties-in-paris">latest</a></li>
    
    <li><a href="/and/about">about</a></li>
    <li><a href="/and/archives">index</a></li>
  </ul>
  </div>
  <div class="grid_2">
  <p class="byline">New entries published Monday and Thursday, 22:00 CET (<a href="/and/feed/us/recent_entries.xml">RSS</a>)</p><!-- <h4>search box</h4> -->
  </div>
</div>

<div id="content" class="container_7">
<div class="grid_1">
  
  <img src="http://mt.schr.fr/lib/support/assets_c/userpics/userpic-8-100x100.png?6" width="100" height="100" alt="" />
  
  <h4 class="author">bnf</h4>
  <p>&nbsp;</p>
  
  <hr />
  
  <h4>Articles</h4>
  <dl>
  
  
  <dt><a href="/and/programmatically-manipulating-typefaces">Programmatically manipulating typefaces</a></dt>
  <dd>May  2, 2012 12:43 PM</dd>
  
  <dt><a href="/and/downloading-funghi">Downloading funghi, from Wikimedia Commons</a></dt>
  <dd>February  3, 2012  6:36 PM</dd>
  
  <dt><a href="/and/absolute-beginners-unix-for-art-students-part-2">Absolute Beginners: Unix for Art Students – Part 2</a></dt>
  <dd>December  2, 2011  2:16 AM</dd>
  
  <dt><a href="/and/vector-pixels">Vector pixels</a></dt>
  <dd>November 25, 2011  5:14 PM</dd>
  
  </dl>

  
  
  <h4>Comments</h4>
  <dl>
  
  
  
  
  
  
  
  
  
  
  
  </dl>
  
  

<!--
  <h4>Shouts</h4>
  <dl>
    <dt>Article name could be very llong indeed</dt>
    <dd>23 days ago - 23 likes</dd>
    <dt>Article name could be very llong indeed</dt>
    <dd>23 days ago - 23 likes</dd>
  </dl>
-->  
  <hr />
  
  <h4>Other writers</h4>
  <ul>
  
    <li>glit</li>
  
    <li>jenseits</li>
  
    <li>habitus</li>
  
    <li>tellyou</li>
  
    <li>baseline</li>
  
    <li>bnf</li>
  
  </ul>
    
</div>
<div class="grid_5 post">
  <p class="byline">
  <a href="/and/making-unix-programs">Previous</a> 
  
  
    / <a href="/and/why-would-europes-largest-open-source-convention-identify-itself-with-a-large-shrivelled-brain">Next</a>
  </p>
  <div>
    <div class="article grid_3 alpha omega suffix_2">
    <h4>Downloading funghi, from Wikimedia Commons</h4>
    <pre>#!/usr/bin/env python
# print the urls of all the images in a category of Wikimedia Commons
# example:
# $ python get_commons.py "Category:Illustrations_of_fungi"

# pipe to wget for download:
# $ python get_commons.py [category] | wget -i - --wait 1

import sys
import json
import urllib2
from urllib import quote

def make_api_query(category, q_continue=""):
    if q_continue:
        q_continue = '&gcmcontinue=' + q_continue
    url = 'http://commons.wikimedia.org/w/api.php?action=query&generator=categorymembers&gcmtitle=' + category + q_continue + '&gcmlimit=500&prop=imageinfo&iiprop=url&format=json'
    request = json.loads(urllib2.urlopen(url).read())
    if 'error' in request:
        sys.exit(request['error']['info'])
    for page in request['query']['pages'].values():
        try:
            print page['imageinfo'][0]['url']
        except KeyError: pass
    # there is a maximum of 500 results in one request, for paging
    # we use the query-continue value:
    if 'query-continue' in request:
        q_continue = quote(request['query-continue']['categorymembers']['gcmcontinue'])
        make_api_query(category, q_continue)

if __name__ == "__main__":
    if len(sys.argv) != 2:
        sys.exit("usage: python get_commons.py [category]")
    make_api_query(sys.argv[1])</pre>

<p><a href="/and/get_commons.py">Download</a></p>

<p><img src="/and/assets/called/funghi.png" style="width:603px;height:390px;" /></p>
    <div id="comments" class="comments">





    
<h4 class="comments-header">3 Comments</h4>
<div class="comments-content">
    
     <!-- If comment doesn't have a top-level-parent -->
            
    <div id="comment-122" class="comment">
    <p>We used a variation on this script while creating a <a href="http://schr.fr/radio-panik" rel="nofollow">design for Radio Panik</a>.</p>
    <p class="byline">
            <img src="http://mt.schr.fr/lib/support/assets_c/2011/07/graphically-thumb-18x18-4.png" width="18" height="18"  />
          by baseline - <a href="http://i.liketightpants.net/and/downloading-funghi.html#comment-122"><abbr class="published" title="2012-02-03T18:54:02+01:00">February  3, 2012  6:54 PM</abbr></a><br />
    <a title="Reply" href="javascript:void(0);" onclick="mtReplyCommentOnClick(122, 'baseline')">Reply</a></p>
    </div>

        
    
    

    
     <!-- If comment doesn't have a top-level-parent -->
            
    <div id="comment-123" class="comment">
    <p>This is an example of a simple script composed in the Python programming language. <code>print</code> outputs lines to the terminal. there is one command line argument, which is the name of the category the script will retrieve the image files for. If you would just run the python script <code>python get_commons.py Illustrations_of_Mushrooms</code> you would get a line of urls printed to the terminal.</p>

<p>The script was designed to be used in a pipeline with the wget program (which, if you‘ve <a href="/and/installing-compilers" rel="nofollow">installed Homebrew</a>, you can install by typing <code>brew install wget</code>). In the wget program, we specify <code>-i -</code> which means take input from the standard input.</p>
    <p class="byline">
            <img src="http://mt.schr.fr/lib/support/assets_c/2011/10/bowie-thumb-18x18-8.jpg" width="18" height="18"  />
          by tellyou - <a href="http://i.liketightpants.net/and/downloading-funghi.html#comment-123"><abbr class="published" title="2012-02-03T18:57:20+01:00">February  3, 2012  6:57 PM</abbr></a><br />
    <a title="Reply" href="javascript:void(0);" onclick="mtReplyCommentOnClick(123, 'tellyou')">Reply</a></p>
    </div>

        
    
    

    
     <!-- If comment doesn't have a top-level-parent -->
            
    <div id="comment-124" class="comment">
    <p>The script requests a url that returns list of images, and their properties, in a json format (just like the <a href="/and/absolute-beginners-unix-for-art-students-part-3" rel="nofollow">twitter api</a> provides). </p>

<p>The script contains a function that calls a url from the wikipedia api, then extracts the image locations available in the response. If there are more images available then can be displayed at once, wikipedia’s api also returns a new url to query that will provide the next set of images and so on. To handle this, the function that queries wikipedia, checks if such a ‘continue-url’ is present, and if so, calls itself with this url as an argument. </p>

<p>The fact that a programming function can call itself is rather baffling at first. This is what programmers call recursion.</p>

<p>Python is not optimized for recursion, but there are styles of programming that are built around this concept. Recursion is an appealing analytical trick. I imagine there is some kind of abstraction gland stimulated by paradoxes and self-referential logic tricks—a kind of weird sister to sexual excitement. Like the symbols preferred by medieaval alchemists. Jenseits likes circles, spirals and <a href="/and/uroboroses" rel="nofollow">Oroburouses</a>. </p>
    <p class="byline">
            <img src="http://mt.schr.fr/lib/support/assets_c/2011/07/critically-thumb-18x18-2.jpg" width="18" height="18"  />
          by habitus - <a href="http://i.liketightpants.net/and/downloading-funghi.html#comment-124"><abbr class="published" title="2012-02-03T19:01:03+01:00">February  3, 2012  7:01 PM</abbr></a><br />
    <a title="Reply" href="javascript:void(0);" onclick="mtReplyCommentOnClick(124, 'habitus')">Reply</a></p>
    </div>

        
    
    
</div>
    



    
    
    <div class="comments-open" id="comments-open">
        <h4 class="comments-open-header">Leave a comment</h4>
        <div class="comments-open-content">

        
            <div id="comment-greeting"></div>

            <form method="post" action="http://mt.schr.fr/comments.cgi" name="comments_form" id="comments-form" onsubmit="return mtCommentOnSubmit(this)">
                <input type="hidden" name="static" value="1" />
                <input type="hidden" name="entry_id" value="43" />
                <input type="hidden" name="__lang" value="en" />
                <input type="hidden" name="parent_id" value="" id="comment-parent-id" />
                <input type="hidden" name="armor" value="1" />
                <input type="hidden" name="preview" value="" />
                <input type="hidden" name="sid" value="" />
                <div id="comments-open-data">
                    <div id="comment-form-name">
                      <div class="alpha grid_1"><label for="comment-author" class="span-4">Name</label></div>
                        <div class="omega grid_2"><input id="comment-author" name="author" size="30" value="" onfocus="mtCommentFormOnFocus()" /></div>
                    </div>
                    <div id="comment-form-email">
                        <div class="alpha grid_1"><label for="comment-email" class="span-4">Email Address</label></div>
                        <div class="omega grid_2"><input id="comment-email" name="email" size="30" value="" onfocus="mtCommentFormOnFocus()" /></div>
                    </div>
                    <div id="comment-form-url">
                        <div class="alpha grid_1"><label for="comment-url" class="span-4">URL</label></div>
                        <div class="omega grid_2"><input id="comment-url" name="url" size="30" value="" onfocus="mtCommentFormOnFocus()" /></div>
                    </div>
                    <div id="comment-form-remember-me">
                        <input type="checkbox" id="comment-bake-cookie" name="bakecookie" onclick="mtRememberMeOnClick(this)" value="1" accesskey="r" />
                        <label for="comment-bake-cookie">Remember personal info?</label>
                    </div>
                </div>
                <div id="comment-form-reply" style="display:none">
                    <input type="checkbox" id="comment-reply" name="comment_reply" value="" onclick="mtSetCommentParentID()" />
                    <label for="comment-reply" id="comment-reply-label"></label>
                </div>
                <div id="comments-open-text">
                    <label for="comment-text">Comments
                    (You may use HTML tags for style)</label><br />
                    <textarea id="comment-text" name="text" rows="15" style="width:100%;" onfocus="mtCommentFormOnFocus()"></textarea>
                </div>
                <div id="comments-open-captcha"></div>
                <div id="comments-open-footer">
                   <!-- <input type="submit" accesskey="v" name="preview_button" id="comment-preview" value="Preview" onclick="this.form.preview.value='1';" /> -->
                    <input type="submit" accesskey="s" name="post" id="comment-submit" value="Submit" />
                </div>
            </form>


        </div>
    </div>
    <script type="text/javascript">
    <!--
    mtAttachEvent("load", mtEntryOnLoad);
    mtAttachEvent("unload", mtEntryOnUnload);
    //-->
    </script>
    


</div>


    </div>
  </div>
  <hr />
  
  <!--<h4>Related articles</h4>
  <dl>
  <dt>Article name could be very llong indeed</dt>
  <dd>23 days ago - 23 likes</dd>
  <dt>Article name could be very llong indeed</dt>
  <dd>23 days ago - 23 likes</dd>
  <dt>Article name could be very llong indeed</dt>
  <dd>23 days ago - 23 likes</dd>
  </dl>-->
</div>

<div class="grid_1">
  <h4>Latest articles</h4>
  <dl>
  
  <dt><a href="/and/parties-in-paris">Parties in Paris</a></dt>
  <dd>September  7, 2012  3:24 PM</dd>
  
  <dt><a href="/and/how-it-has-come-about-that-code-hosting-site-github-offers-visualisations-of-typeface-development">How it Has Come About That Code Hosting Site Github Offers Visualisations of Typeface Development</a></dt>
  <dd>August  4, 2012  8:28 PM</dd>
  
  <dt><a href="/and/figuring-out-fontforge-pythons-representation-of-postscript-curves">Figuring Out Fontforge-Python’s Representation of Postscript Curves</a></dt>
  <dd>June  3, 2012  5:06 PM</dd>
  
  <dt><a href="/and/programmatically-manipulating-typefaces">Programmatically manipulating typefaces</a></dt>
  <dd>May  2, 2012 12:43 PM</dd>
  
  <dt><a href="/and/drawing-logos">Drawing logo’s</a></dt>
  <dd>April 24, 2012  5:06 PM</dd>
  
  <dt><a href="/and/seb-explaining-love-and-bezier-curves">Seb Explaining Love and Bezier Curves</a></dt>
  <dd>April 17, 2012 12:06 AM</dd>
  
  <dt><a href="/and/my-favourite-logo-ever-is-for-gnu-pascal">My favourite logo ever is for GNU Pascal</a></dt>
  <dd>April  8, 2012  1:53 AM</dd>
  
  <dt><a href="/and/my-favourite-wikipedia-user-user-rama">My Favourite Wikipedia User User:Rama</a></dt>
  <dd>February 23, 2012 11:43 PM</dd>
  
  <dt><a href="/and/daniela-likes-open-source-programming-conferences-like-fosdem">Daniela Likes Open Source Programming Conferences Like Fosdem</a></dt>
  <dd>February 17, 2012 10:55 PM</dd>
  
  <dt><a href="/and/why-would-europes-largest-open-source-convention-identify-itself-with-a-large-shrivelled-brain">Why Would Europe’s Largest Open Source Convention Identify Itself With a Large Shrivelled Brain?</a></dt>
  <dd>February  3, 2012  7:55 PM</dd>
  
  </dl>

  <h4>Latest Comments</h4>
        <ul>
        
            <li><strong>habitus:</strong> The script requests a url that returns list of images, <a href="/and/downloading-funghi#comment-124" title="full comment on: Downloading funghi, from Wikimedia Commons">read more</a></li>
        
    
    
            <li><strong>tellyou:</strong> This is an example of a simple script composed in <a href="/and/downloading-funghi#comment-123" title="full comment on: Downloading funghi, from Wikimedia Commons">read more</a></li>
        
    
    
            <li><strong>baseline:</strong> We used a variation on this script while creating a <a href="/and/downloading-funghi#comment-122" title="full comment on: Downloading funghi, from Wikimedia Commons">read more</a></li>
        
        </ul>
        
    


<!--
  <h4>Last 10 shouts</h4>
  <dl>
  <dt>Article name could be very llong indeed</dt>
  <dd>23 days ago - 23 likes</dd>
  <dt>Article name could be very llong indeed</dt>
  <dd>23 days ago - 23 likes</dd>
  <dt>Article name could be very llong indeed</dt>
  <dd>23 days ago - 23 likes</dd>
  </dl>
-->
</div>
</div>
<div id="bar">&nbsp;</div>
<!-- Piwik, Open Source Analytics,
let’s not give Google more data then necessary! Eric --> 
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://var.schr.fr/piwik/" : "http://var.schr.fr/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 2);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://var.schr.fr/piwik/piwik.php?idsite=2" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->
</body>
</html>
